<!DOCTYPE html>
<html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <script src="viz-lite.js"></script>
    <script src="jquery-3.2.1.min.js"></script>

    <style type="text/css">
        body {
            font-family: 'Segoe UI', sans-serif;
        }

        /*slider*/
        .range {
            position: relative;
            width: 550px;
            height: 5px;
        }

        .range input {
            width: 100%;
            position: absolute;
            top: 2px;
            height: 0;
            -webkit-appearance: none;
        }

        .range input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            margin: -8px 0 0;
            border-radius: 50%;
            background: #37adbf;
            cursor: pointer;
            border: 0 !important;
        }

        .range input::-moz-range-thumb {
            width: 18px;
            height: 18px;
            margin: -8px 0 0;
            border-radius: 50%;
            background: #37adbf;
            cursor: pointer;
            border: 0 !important;
        }

        .range input::-ms-thumb {
            width: 18px;
            height: 18px;
            margin: -8px 0 0;
            border-radius: 50%;
            background: #37adbf;
            cursor: pointer;
            border: 0 !important;
        }

        .range input::-webkit-slider-runnable-track {
            width: 100%;
            height: 2px;
            cursor: pointer;
            background: #b2b2b2;
        }

        .range input::-moz-range-track {
            width: 100%;
            height: 2px;
            cursor: pointer;
            background: #b2b2b2;
        }

        .range input::-ms-track {
            width: 100%;
            height: 2px;
            cursor: pointer;
            background: #b2b2b2;
        }

        .range input:focus {
            background: none;
            outline: none;
        }

        .range input::-ms-track {
            width: 100%;
            cursor: pointer;
            background: transparent;
            border-color: transparent;
            color: transparent;
        }

        .range-labels {
            margin: 18px -41px 0;
            padding: 0;
            list-style: none;
        }

        .range-labels li {
            position: relative;
            float: left;
            width: 90.25px;
            text-align: center;
            color: #b2b2b2;
            font-size: 25px;
            cursor: pointer;
        }

        .range-labels li::before {
            position: absolute;
            top: -25px;
            right: 0;
            left: 0;
            content: "";
            margin: 0 auto;
            width: 9px;
            height: 9px;
            background: #b2b2b2;
            border-radius: 50%;
        }

        .range-labels:active {
            color: #37adbf;
        }

        .range-labels .selected::before {
            background: #37adbf;
        }

        .range-labels .active.selected::before {
            display: none;
        }

        .scale {
            transform: scale(0.7);
            position: fixed;
            top: 0px;
            right: 0px;
        }

        .refreshTitle {
            text-align: center;
            color: #37adbf;
            margin-bottom: 10px;
            font-size: 30px;
        }

        #download-svg {
            text-shadow: 0px 1px 1px rgba(0,0,0,0.5);
            cursor: pointer;
            background: #37adbf;
            border: thin solid #33a2b3;
            border-radius: 10px;
            color: white;
            margin: 20px;
            padding: 10px 20px 10px 20px;
            position: fixed;
            text-decoration: none;
        }

        #download-svg:hover {
            background: #3bbbce;
        }

        #download-svg img {
            width: 16px;
            height: 16px;
        }

        #loading {
            position: absolute;
            text-align: center;
            top: 50%;
            width: 100%;
            font-size: 30px;
            z-index: 0.5;
            padding: 50px;
        }
    </style>
</head>
<body>

<div class="scale"><div class="refreshTitle"><b>Refresh Rate</b></div>
    <div class="range" id="slidecontainer">
        <input type="range" min="1" max="7" steps="1" value="3" id="sliderRange">
    </div>
    <ul class="range-labels">
        <li>40 Ms</li>
        <li>160 Ms</li>
        <li class="active selected">1 Sec</li>
        <li>20 Sec</li>
        <li>1 Min</li>
        <li>20 Min</li>
        <li>1 Hr</li>
    </ul>

</div>

<a id="download-svg" href="#">
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAChSURBVEhL5dHBDYMwEERRnyklTdEaTaWUXB1m5a+NErAEZi4RT7KUDN45rMt9vH8Q+9CbiH3oTcQ+9CZiH3oTsQ+9idiH3kTsQ28iHqeOpVUdsjB2nIamWuuzzfdxZ2LsHA0/dF6taiu+xR2uj1HBTN9GfOPaNerae4/ze+9R2dd78Hts7z2xa53Y+fW996h4jsPfu2nP50PtB7kNtX+vlBUqJwHrBaCaGQAAAABJRU5ErkJggg==">
    Download
</a>

<div id="demo"><div id="loading"><img src="data:image/gif;base64,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" />Loading...</div></div>

<script type="text/javascript">

    $("#download-svg,.scale").hide();
    var saveData = (function () {
        var a = document.createElement("a");
        document.body.appendChild(a);
        a.style = "display: none";
        return function (data, fileName) {
            var blob = new Blob([data], {type: "octet/stream"}),
                url = window.URL.createObjectURL(blob);
            a.href = url;
            a.download = fileName;
            a.click();
            window.URL.revokeObjectURL(url);
        };
    }());

    $("#download-svg").click(function() {
        var date = new Date();
        var year = date.getFullYear().toString();
        var month = (date.getMonth()+1).toString();
        var day = date.getDate().toString();
        var hour = date.getHours().toString();
        var min = date.getMinutes().toString();
        var sec = date.getSeconds().toString();
        saveData($("#demo").html(), `telemetry_${year}-${month}-${day}_${hour}-${min}-${sec}.svg`);
    });

    function httpGet(theUrl, onSuccess, onError) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.timeout = 2000;
        xmlHttp.onreadystatechange = function() {
            if (this.readyState === 4) {
                if (this.status >= 200 && this.status < 300) {
                    onSuccess(this.responseText);
                } else{
                    onError("Received " + this.status + " from server.");
                }
            }
        };
        xmlHttp.open( "GET", theUrl, true );
        xmlHttp.send();
    }

    var doingUpdate = false;

    function doUpdate() {
        if (!doingUpdate || !paintAllDrawing) { //doingUpdate and paintAllDrawing is false
            doingUpdate = true;
            httpGet('graph.dot', paintParts, handleError);
        } else {
            doUpdate();
        }
    }

    var webworker;
    if (window.Worker) {
        webworker = new Worker('webworker.js');
    }

    function handleError(error) {
        console.log('Error: ' + error);
        doingUpdate = false;
    }

    var isFirst = true; //only effects initial paintAll
    var initialInterval;
    var paintAllDrawing = false;
    var interval = 1000;
    var webworkerInProgress = false;
    var paintAllinProgress = false;
    var sliderIsActive = false;

    function paintAll () {
        paintAllinProgress = true;
        if (webworker) {

            //message posted to webworker
            if (!webworkerInProgress){
                webworkerInProgress = true;
                webworker.postMessage("");
            }
            else {
                paintAll();
            }

            //message returned from the webworker
            webworker.onmessage = function (e) {
                webworkerInProgress = false;
                paintAllDrawing = true;
                $('#download-svg,.scale').show();
                document.getElementById("demo").innerHTML = e.data.result;
                paintAllDrawing = false;
                paintAllinProgress = false
                $("#graph0 title").remove();
                if (isFirst) {
                    initialInterval = setInterval(doUpdate,interval); //initially set paintParts
                    isFirst=false;
                    sliderIsActive = true;
                }
            };
        }
    }

    //   to get the number of stage and edge IDs
    var edgeid = new RegExp(/" -> "/g); //edge ids
    var totalids = new RegExp (/label/g); //total ids

    var node = new RegExp(/label="([^"]+)"/g); //grabs the section
    var newline = new RegExp(/([^\n]+)/g); //grabs each line in the section
    var features = new RegExp(/\"(.*)\]/g); //grabs everything between " and ]
    var oldfeatureArray = [];
    var newfeatureArray = [];
    var eoldfeatureArray = [];
    var enewfeatureArray = [];

    //function that updates the text values
    function paintParts(dot) {
        var numberOfEdgeIds  = dot.match(edgeid).length;   // Number of edge IDs
        var numberOfTotalIds = dot.match(totalids).length; // Number of total IDs
        var numberOfNodeIds = numberOfTotalIds-numberOfEdgeIds; //Number of node IDs
        var whole = dot.match(node); //section matches starting with label=" and ending with "
        var ss = 1; // node id number in html (node ids start at 1)
        var ee = 1; //edge id number in html (node ids start at 1)
        var featureSection = dot.match(features); //grabs all features

        for (var s = 0; s < numberOfNodeIds; s++) {   // is the number of nodes
            var iteration = whole[s].match(newline).map(function(item) {
                var formattedSection = featureSection[s].replace(/"|]/g, '');
                oldfeatureArray.push(formattedSection);
                featureSection[s] = formattedSection;
                return item.replace(/label|"|=/g, '');
            });

            $('#node' + ss).children('text').each(function(itemIdx, item) {
                if (itemIdx !== 0) { //skips title line which doesn't change
                    item = $(item);
                    if (item.text() !== iteration[itemIdx]) { //if there is a change in the html
                        if ((item.text().length !== iteration[itemIdx].length) && !paintAllinProgress) { //if the length is different redraw
                            doingUpdate = false;
                            paintAll();
                        } else{
                            item.text(iteration[itemIdx]); // if there is a change but length is same just update that line
                        }
                        item.text(iteration[itemIdx]);
                    }
                }
            });
            ss++;
        }

        //updates paintAll for nodes depending on changes to color and thickness
        var is_same = oldfeatureArray.length === newfeatureArray.length && oldfeatureArray.every(function(element, index) {
            return element === newfeatureArray[index];
        });
        if ((!is_same && !isFirst) && !paintAllinProgress){
            doingUpdate = false;
            paintAll();
        }
        newfeatureArray = Array.from(oldfeatureArray); //assign old array to new array
        oldfeatureArray = []; //empty old array so we can repeat the process


        //updates the edges
        for (var e = numberOfNodeIds; e < numberOfTotalIds; e++) {   // is the number of nodes
            var eiteration = whole[e].match(newline).map(function(item) {
                var eformattedSection = featureSection[e].replace(/"|]/g, '');
                eoldfeatureArray.push(eformattedSection);
                featureSection[e] = eformattedSection;
                return item.replace(/label|"|=/g, '');
            });

            $('#edge' + ee).children('text').each(function(itemIdx, item) {
                if (itemIdx !== 0) {
                    item = $(item);
                    if(item.text() !== eiteration[itemIdx]) {
                        if ((item.text().length !== eiteration[itemIdx].length) && !paintAllinProgress) { //if lenght of text changes bubble needs to be redrawn
                            doingUpdate = false;
                            paintAll();
                        } else {
                            item.text(eiteration[itemIdx]);
                        }
                    }
                }
            });
            ee++;
        }

        //updates paintAll for edges depending on changes to color and thickness
        is_same = eoldfeatureArray.length === enewfeatureArray.length && eoldfeatureArray.every(function(element, index) {
            return element === enewfeatureArray[index];
        });
        if ((!is_same && !isFirst) && (!paintAllinProgress)){
            doingUpdate = false;
            paintAll();
        }

        enewfeatureArray = Array.from(eoldfeatureArray); //assign old array to new array
        eoldfeatureArray = []; //empty old array so we can repeat the process

        doingUpdate = false;
        return 0;
    }

    paintAll(); //runs first initiall paintAll();

    if (sliderIsActive){
        var updatedInterval = setInterval(doUpdate, interval);
    }

    function stopInterval() {
        clearInterval(updatedInterval);
        clearInterval(initialInterval);
    }

    var sheet = document.createElement('style'),
        $rangeInput = $('.range input'),
        prefs = ['webkit-slider-runnable-track', 'moz-range-track', 'ms-track'];
    document.body.appendChild(sheet);

    var getTrackStyle = function (el) {
        var curVal = el.value;
        var val = (curVal - 1) * 16.666666667,
            style = '';

        switch (curVal) {
            case '1':
                interval = 40;
                break;
            case '2':
                interval = 160;
                break;
            case '3':
                interval = 1000;
                break;
            case '4':
                interval = 20000;
                break;
            case '5':
                interval = 60000;
                break;
            case '6':
                interval = 1.2e+6;
                break;
            case '7':
                interval = 3.6e+6;
                break;
        }

        if (sliderIsActive){
            stopInterval();
            updatedInterval = setInterval(doUpdate, interval); //gets updated from the slider
        }

        // Set active label
        $('.range-labels li').removeClass('active selected');

        var curLabel = $('.range-labels').find('li:nth-child(' + curVal + ')');

        curLabel.addClass('active selected');
        curLabel.prevAll().addClass('selected');

        // Change background gradient
        for (var i = 0; i < prefs.length; i++) {
            style += '.range {background: linear-gradient(to right, #37adbf 0%, #37adbf ' + val + '%, #fff ' + val + '%, #fff 100%)}';
            style += '.range input::-' + prefs[i] + '{background: linear-gradient(to right, #37adbf 0%, #37adbf ' + val + '%, #b2b2b2 ' + val + '%, #b2b2b2 100%)}';
        }
        return style;
    };

    $rangeInput.on('input', function () {
        sheet.textContent = getTrackStyle(this);
    });

    // Change input value on label click
    $('.range-labels li').on('click', function () {
        var index = $(this).index();
        $rangeInput.val(index + 1).trigger('input');
    });
</script>

</body>
</html>